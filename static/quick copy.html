<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewpoint" content="width=device-width, initial-scale=1.0">
    <title>席決めアプリ</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" href="/static/favicon.png">
</head>
<body>
<main class="container">
    <hgroup>
        <h1>⏱️　クイックモード</h1>
        <h2>テーブル構成とメンバーを設定して、ランダムに席を決めよう</h2>
    </hgroup>

    <div class="grid">
        <div>
            <article class="card">
                <h3><i>田</i> テーブル設定</h3>
                <div class="bg-purple-light" style="margin-top: 20px; font-weight: bold; color: var(--primary);">
                    合計： <span id="total-tables">0</span> テーブル / <span id="total-seats">0</span> 席
                </div>
                <p style="font-weight: bold; margin-bottom: 10px;">テーブルの人数を選択</p>
                
                <div class="capacity-grid" id="capacity-buttons">
                    <button type="button" class="capacity-btn" onclick="selectCapacity(2)">2人</button>
                    <button type="button" class="capacity-btn selected" onclick="selectCapacity(4)">4人</button> <button type="button" class="capacity-btn" onclick="selectCapacity(6)">6人</button>
                    <button type="button" class="capacity-btn" onclick="selectCapacity(8)">8人</button>
                    <button type="button" class="capacity-btn" onclick="selectCapacity(10)">10人</button>
                    <button type="button" class="capacity-btn" onclick="selectCapacity(12)">12人</button>
                </div>

                <button type="button" class="primary-btn" onclick="addTable()" style="margin-bottom: 30px;">
                    ＋ <span id="selected-capacity-display">4</span>人席を追加
                </button>

                <p style="font-weight: bold; margin-bottom: 10px;">追加されたテーブル</p>

                <div id="table-list-display"></div>


            </article>
        </div>

        <div>
            <article class="card">
                <h3><i>👤</i> メンバー入力</h3>
                
                <div class="status-bar">
                    合計席数：<span id="status-total-seats">0</span>席 / 
                    現在：<span id="status-member-count">0</span>人
                </div>

                <p style="font-weight: bold; margin-bottom: 10px;">メンバー名を入力</p>
                <div class="input-group">
                    <input type="text" id="new-member-name" placeholder="名前" 
                        onkeydown="if(event.key==='Enter') addMemberSingle()"
                        style="flex: 2;"> <select id="new-member-grade" style="margin-bottom: 0;">
                        <option value="D3">D3</option>
                        <option value="D2">D2</option>
                        <option value="D1">D1</option>
                        <option value="M2">M2</option>
                        <option value="M1">M1</option>
                        <option value="B4" selected>B4</option>
                        <option value="B3">B3</option>
                        <option value="他">他</option>
                    </select>

                    <button class="primary-btn" onclick="addMemberSingle()" style="width: auto;">＋ 追加</button>
                </div>

                <p style="font-weight: bold; margin-bottom: 10px;">追加されたメンバー</p>
                
                <div id="members-list-display" style="max-height: 400px; overflow-y: auto;">
                    </div>

                <button class="secondary outline" onclick="openBulkModal()" style="width:100%; margin-top:20px;">
                    📝 まとめて一括入力
                </button>
            </article>
        </div>

        <div>
    <article class="card" style="min-height: 400px; display: flex; flex-direction: column;">
        <h3><i>🔀</i> 席の配置</h3>

        <div id="result-placeholder" class="result-placeholder">
            <div class="result-placeholder-icon">🔀</div>
            <p style="margin-bottom: 30px;">
                テーブルとメンバーを設定して<br>
                席を決定してください
            </p>
            <button class="primary-btn" onclick="shuffleSeats()">
                席を決定する
            </button>
        </div>
        
        <div id="result-content" style="display: none;">
            <div id="result-list"></div>

            <div class="action-buttons">
                <button class="primary-btn" onclick="shuffleSeats()">
                    <i>🔀</i> 再抽選
                </button>
                <button class="secondary outline" onclick="resetAll()" style="width:100%;">
                    リセット
                </button>
            </div>
        </div>

    </article>
</div>

    </div></main>


<dialog id="bulk-modal">
    <article>
        <header>
            <h3>📝 一括入力</h3>
        </header>
        <p>改行区切りで名前を貼り付けてください</p>
        <textarea id="bulk-textarea" rows="10" placeholder="Aさん&#13;&#10;Bさん&#13;&#10;Cさん..."></textarea>
        <footer>
            <button onclick="applyBulkInput()">反映する</button>
            <button class="secondary" onclick="closeBulkModal()">キャンセル</button>
        </footer>
    </article>
</dialog>

<script src="/static/scripts.js"></script>
</body>
</html>